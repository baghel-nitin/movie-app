{"version":3,"file":"static/js/800.83ea3232.chunk.js","mappings":"4KAGO,MAAMA,EACXA,CAACC,EAAcC,IAAiBC,UAC9BC,GAASC,EAAAA,EAAAA,KAAW,IACpB,IAIE,IAAIC,SAHmBC,EAAAA,EAAMC,IAAI,4CAADC,OACcR,EAAI,WAE9BK,KAAKL,KACzBG,GAASM,EAAAA,EAAAA,IAAUJ,IACnBJ,GAASD,GAAcA,EAAO,GAChC,CAAE,MAAOU,GACPP,GAASC,EAAAA,EAAAA,KAAW,IACpBO,QAAQC,IAAIF,EACd,CACAP,GAASC,EAAAA,EAAAA,KAAW,GAAO,E,aCV/B,MAAMS,GAAYC,EAAAA,EAAAA,OAAK,IAAM,+BACvBC,GAAYD,EAAAA,EAAAA,OAAK,IAAM,+BACvBE,GAASF,EAAAA,EAAAA,OAAK,IAAM,+BA0F1B,EAjF0BG,KACxB,MAAOjB,EAAMC,IAAWiB,EAAAA,EAAAA,UAAS,IAC1BC,EAAaC,IAAkBF,EAAAA,EAAAA,UAAS,IAE/C,MAAOG,EAAWC,IAAgBJ,EAAAA,EAAAA,UADP,IAGrBf,GAAWoB,EAAAA,EAAAA,OAEX,KAAElB,EAAI,aAAEmB,EAAY,MAAEC,EAAK,QAAEC,IAAYC,EAAAA,EAAAA,KAC5CC,GAAuCA,EAAMC,SAI1CC,GAAYC,EAAAA,EAAAA,cAAY7B,UAC5BC,EAASJ,EAAiBC,EAAMC,GAAS,GACxC,CAACD,EAAMG,KAEV6B,EAAAA,EAAAA,YAAU,KACR7B,EAASJ,EAAiBC,EAAMC,IACzB,MACLgC,EAAAA,EAAAA,KAAW,IAEZ,KAEHD,EAAAA,EAAAA,YAAU,KACRV,EAAajB,EAAK,GACjB,CAACA,KAEJ2B,EAAAA,EAAAA,YAAU,KAER,MAAME,EAAeA,KACnB,GAAI7B,EAAK8B,UAAYX,EACnB,OAEF,MAAM,UAAEY,EAAS,aAAEC,EAAY,aAAEC,GAC/BC,SAASC,gBACPJ,EAAYC,GAAgBC,EAAe,IAC7CR,GACF,EAIF,OADAW,OAAOC,iBAAiB,SAAUR,GAC3B,KACLO,OAAOE,oBAAoB,SAAUT,EAAa,CACnD,GACA,CAAC7B,EAAK8B,OAAQL,EAAWN,IAiB5B,OACIoB,EAAAA,EAAAA,KAAA,OAAKC,UAAU,mCAAkCC,UAC/CC,EAAAA,EAAAA,MAAA,OAAKF,UAAU,sCAAqCC,SAAA,EAClDF,EAAAA,EAAAA,KAAC/B,EAAS,CACRY,MAAOA,EACPN,YAAaA,EACb6B,aApBYC,IACpB,MAAM,MAAEC,GAAUD,EAAME,OAGxB,GAFA/B,EAAe8B,IAEVA,EAAMf,OAET,YADAb,EAAajB,GAGf,MAAM+C,EAAa,IAAI/C,GAAMgD,QAAQC,GAC5BA,EAAMC,KAAKC,cAAcC,SAASP,EAAMM,iBAEjDlC,EAAa8B,EAAM,KAWbL,EAAAA,EAAAA,MAAA,OAAKF,UAAU,+EAA8EC,SAAA,CACjF,OAATzB,QAAS,IAATA,OAAS,EAATA,EAAWqC,KAAI,CAACC,EAAkBC,KACjChB,EAAAA,EAAAA,KAAC7B,EAAS,CAAW4C,KAAMA,GAAXC,KAEjBlC,IAAWkB,EAAAA,EAAAA,KAAC5B,EAAM,WAGnB,C","sources":["store/movies/moviesAPI.ts","pages/movies/MovieList.tsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { setLoading, setMovies } from \"./moviesSlice\";\r\n\r\nexport const getMoviewsByPage: any =\r\n  (page: number, setPage: any) => async (dispatch: any) => {\r\n    dispatch(setLoading(true));\r\n    try {\r\n      const response = await axios.get(\r\n        `https://test.create.diagnal.com/data/page${page}.json`\r\n      );\r\n      let data = response.data.page;\r\n      dispatch(setMovies(data));\r\n      setPage((page: any) => page + 1);\r\n    } catch (error) {\r\n      dispatch(setLoading(false));\r\n      console.log(error);\r\n    }\r\n    dispatch(setLoading(false));\r\n  };\r\n","import { FC, lazy,Suspense, useEffect, useState, useCallback } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\n\r\nimport { getMoviewsByPage } from \"../../store/movies/moviesAPI\";\r\nimport { clearData } from \"../../store/movies/moviesSlice\";\r\n\r\nimport { MovieProps } from \"../../components/MovieCard\";\r\nconst SearchBar = lazy(() => import(\"../../components/SearchBar\"));\r\nconst MovieCard = lazy(() => import(\"../../components/MovieCard\"));\r\nconst Loader = lazy(() => import(\"../../components/Loader\"));\r\n\r\nexport interface MovieStateProps {\r\n  data: MovieProps[];\r\n  totalRecords: number;\r\n  title: string;\r\n  loading: boolean;\r\n}\r\n\r\nconst MovieList: FC<{}> = () => {\r\n  const [page, setPage] = useState(1);\r\n  const [searchValue, setSearchValue] = useState(\"\");\r\n  let movies: MovieProps[] = [];\r\n  const [movieList, setMovieList] = useState(movies);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { data, totalRecords, title, loading } = useSelector(\r\n    (state: { movies: MovieStateProps }) => state.movies\r\n  );\r\n\r\n  // Fetch data from api\r\n  const fetchData = useCallback(async () => {\r\n    dispatch(getMoviewsByPage(page, setPage));\r\n  }, [page, dispatch]);\r\n\r\n  useEffect(() => {\r\n    dispatch(getMoviewsByPage(page, setPage));\r\n    return () => {\r\n      clearData();\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setMovieList(data);\r\n  }, [data]);\r\n\r\n  useEffect(() => {\r\n    // Handle scroll action on mouse scroll\r\n    const handleScroll = () => {\r\n      if (data.length === +totalRecords) {\r\n        return;\r\n      }\r\n      const { scrollTop, clientHeight, scrollHeight } =\r\n        document.documentElement;\r\n      if (scrollTop + clientHeight >= scrollHeight - 20) {\r\n        fetchData();\r\n      }\r\n    };\r\n\r\n    window.addEventListener(\"scroll\", handleScroll);\r\n    return () => {\r\n      window.removeEventListener(\"scroll\", handleScroll);\r\n    };\r\n  }, [data.length, fetchData, totalRecords]);\r\n\r\n  // Handle search action for search input\r\n  const handleSearch = (event: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { value } = event.target;\r\n    setSearchValue(value);\r\n    // If the user searched for an empty string, display all data.\r\n    if (!value.length) {\r\n      setMovieList(data);\r\n      return;\r\n    }\r\n    const items: any = [...data].filter((movie) => {\r\n      return movie.name.toLowerCase().includes(value.toLowerCase());\r\n    });\r\n    setMovieList(items);\r\n  };\r\n\r\n  return (\r\n      <div className=\"flex w-full flex-col self-center\">\r\n        <div className=\"flex w-full flex-col justify-center\">\r\n          <SearchBar\r\n            title={title}\r\n            searchValue={searchValue}\r\n            handleSearch={handleSearch}\r\n          />\r\n          <div className=\"mx-1 mt-10 flex flex-wrap justify-center gap-2 self-center md:mx-8 y9:gap-5 \">\r\n            {movieList?.map((item: MovieProps, idx: number) => (\r\n              <MovieCard key={idx} item={item} />\r\n            ))}\r\n            {loading && <Loader />}\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n\r\nexport default MovieList;\r\n"],"names":["getMoviewsByPage","page","setPage","async","dispatch","setLoading","data","axios","get","concat","setMovies","error","console","log","SearchBar","lazy","MovieCard","Loader","MovieList","useState","searchValue","setSearchValue","movieList","setMovieList","useDispatch","totalRecords","title","loading","useSelector","state","movies","fetchData","useCallback","useEffect","clearData","handleScroll","length","scrollTop","clientHeight","scrollHeight","document","documentElement","window","addEventListener","removeEventListener","_jsx","className","children","_jsxs","handleSearch","event","value","target","items","filter","movie","name","toLowerCase","includes","map","item","idx"],"sourceRoot":""}